<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Q</title>
		<link rel="stylesheet" href="css/jquery-ui.custom.css">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<script src="js/jquery-1.10.2.js"></script>
		<script src="js/jquery-ui.js"></script>
		<script type="text/javascript">
			var qu = "https://api.ba.com/rest-v1/v1/flightOfferBasic;departureCity=LON;arrivalCity=NYC;cabin=economy;journeyType=oneWay;range=monthLow.json";
			$(document).ready(function (){
				$.ajax({
		            type:"GET",
		            url: "https://query.yahooapis.com/v1/public/yql",
		            dataType: "jsonp",
					data: {
						q: "USE 'http://drunky.noip.me/KI/tmp.txt' AS remote; SELECT * FROM remote WHERE url='https://api.ba.com/rest-v1/v1/flightOfferMktAffiliates;departureDateTimeOutbound=2014-05-28T00:00:00;locationCodeOriginOutbound=LHR;locationCodeDestinationOutbound=JFK;cabin=Economy;ADT=1;CHD=0;INF=0;format=.json'",
						format: "json"
					},
		            success: function(data) {
		            	$.each(data.query.results.OTA_AirLowFareSearchRS.PricedItineraries.PricedItinerary, function(i){
			            		$("#wrapper").append("<br />" + i);
			            		$("#wrapper").append("<br />DepartureDateTime: " + data.query.results.OTA_AirLowFareSearchRS.PricedItineraries.PricedItinerary[i].AirItinerary.OriginDestinationOptions.OriginDestinationOption.FlightSegment._DepartureDateTime);
				                $("#wrapper").append("<br />ArrivalDateTime: " + data.query.results.OTA_AirLowFareSearchRS.PricedItineraries.PricedItinerary[i].AirItinerary.OriginDestinationOptions.OriginDestinationOption.FlightSegment._ArrivalDateTime);
				                $("#wrapper").append("<br />Airline: " + data.query.results.OTA_AirLowFareSearchRS.PricedItineraries.PricedItinerary[i].AirItinerary.OriginDestinationOptions.OriginDestinationOption.FlightSegment.OperatingAirline._CompanyShortName);
				                $("#wrapper").append("<br />Price: " + data.query.results.OTA_AirLowFareSearchRS.PricedItineraries.PricedItinerary[i].AirItineraryPricingInfo.ItinTotalFare.TotalFare._Amount + " " + data.query.results.OTA_AirLowFareSearchRS.PricedItineraries.PricedItinerary[i].AirItineraryPricingInfo.ItinTotalFare.TotalFare._CurrencyCode);
		            		});
		            }
			    });
			});
		</script>
	</head>
	<body>
		<div id="wrapper">
			
		</div>
	</body>
</html>
